!function(e){const t={doError(e){let t=!0;if(e instanceof Object||e instanceof Array?e instanceof Array&&!e.length&&(console.error("Neysla: Array of initializators is empty."),t=!1):(console.error("Neysla: You must set an Array of initializators, in order to use a generated Oauth2 accessToken."),t=!1),!t||e instanceof Array||(e=[e]),t)for(let s in e)e[s].name&&"string"==typeof e[s].name&&""!=typeof e[s].name?e[s].url&&"string"==typeof e[s].url&&""!=typeof e[s].url?e[s].token&&"object"==typeof e[s].token&&!("object"==typeof e[s].token&&e[s].token instanceof Array)&&e[s].token.name&&"string"==typeof e[s].token.name&&""!=typeof e[s].token.name&&e[s].token.value&&"string"==typeof e[s].token.value&&""!=typeof e[s].token.value||(console.warn(`Neysla: Initializator with index ${s} has no properly defined token's name and/or value.\n          Therefore no token will be added to your models`),e[s].token=null):(console.error(`Neysla: Initializator with index ${s} has no properly defined url.`),t=!1):(console.error(`Neysla: Initializator with index ${s} has no properly defined name.`),t=!1);return!!t&&e},doService(e){const t={};for(const s of e)t[s.name]=this._setBuilder(s);return t},_setBuilder:e=>new class{constructor(e){this.config=e}getToken(){return this.config.token}setModel(e){return new s(this.config,e)}}({url:e.url,token:e.token})};class s{constructor(e,t){t instanceof Array||"string"==typeof t?(this.token=e.token,this.name=t,this.url=e.url):console.error("Neysla: The model's name is not properly defined.")}_setUrl(e){if(!(e instanceof Object))return void console.error("Neysla: The model's data is not properly defined.");if(e.delimiters&&!(e.delimiters instanceof Array||"string"==typeof e.delimiters||"number"==typeof e.delimiters))return void console.error("Neysla: The model's delimiters are not properly defined.");if("string"==typeof this.name&&(this.name=[this.name]),!e.delimiters||e.delimiters instanceof Array?e.delimiters||(e.delimiters=[]):e.delimiters=[e.delimiters],!e.delimiters&&this.name.length>1||this.name.length!==e.delimiters.length&&this.name.length-1!==e.delimiters.length)return void console.error("Neysla: Incorrect relation between name and delimiters.");let t="";for(let s in this.name)t+=`${this.name[s]}${e.delimiters[s]?"/"+e.delimiters[s]:""}${parseInt(s,10)===this.name.length-1?this.token?`?${this.token.name}=${this.token.value}`:"":"/"}`;return t}_setParams(e){let t="";if(e instanceof Object){let s=0;Object.keys(e).forEach(r=>{t+=`${0!==s||0===s&&this.token?"&":"?"}${r}=${e[r]}`,s++})}return t}_setBody(e,t){let s=null;return e instanceof Object&&t?s=JSON.stringify(e):e instanceof Object&&(s="",Object.keys(e).forEach(t=>s+=`${""!==s?"&":""}${t}=${e[t]}`)),s}_handleResponse(e,t,s){const r={headers:{},status:e.status,statusText:e.statusText,getHeader:t=>e.getResponseHeader(t),data:e.response,dataType:e.responseType,url:e.responseURL};let n=e.getAllResponseHeaders().split("\r\n");for(const e of n)if(""!==e){const t=e.split(":");r.headers[t[0]]=t[1].trim()}e.status>=300||0===e.status?s(r):t(r)}_executeRequest(e){return new Promise((t,s)=>{const r=new XMLHttpRequest;r.addEventListener("loadend",()=>this._handleResponse(r,t,s)),r.responseType=e.responseType&&"string"==typeof e.responseType?e.responseType:"json",r.open(e.method,this.url+e.paramsRequest,!0),r.setRequestHeader("Content-Type",e.requestJson?"application/json":"application/x-www-form-urlencoded"),r.send(e.body)})}get(e){let t=this._setUrl(e);return e.params instanceof Object&&(t+=this._setParams(e.params)),this._executeRequest({method:"GET",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:t,body:null})}head(e){let t=this._setUrl(e);return e.params instanceof Object&&(t+=this._setParams(e.params)),this._executeRequest({method:"HEAD",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:t,body:null})}post(e){const t=this._setBody(e.body,e.requestJson);let s=this._setUrl(e);return e.params instanceof Object&&(s+=this._setParams(e.params)),this._executeRequest({method:"POST",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:s,body:t})}patch(e){const t=this._setBody(e.body,e.requestJson);let s=this._setUrl(e);return e.params instanceof Object&&(s+=this._setParams(e.params)),this._executeRequest({method:"PATCH",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:s,body:t})}put(e){const t=this._setBody(e.body,e.requestJson);let s=this._setUrl(e);return e.params instanceof Object&&(s+=this._setParams(e.params)),this._executeRequest({method:"PUT",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:s,body:t})}remove(e){const t=this._setBody(e.body,e.requestJson);let s=this._setUrl(e);return e.params instanceof Object&&(s+=this._setParams(e.params)),this._executeRequest({method:"DELETE",requestJson:e.requestJson,responseType:e.responseType,paramsRequest:s,body:t})}}module.exports=(e=>{if(!(e=t.doError(e)))return;const s=t.doService(e);return new Promise((e,t)=>s?e(s):t(s))})}("undefined"==typeof Neysla?Neysla={}:Neysla);